<!-- index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Valuation Tool</title>
</head>
<body>
    <h1>Business Valuation Tool</h1>
    <form method="POST" action="/" id="valuationForm">
        <label for="num_cash_flows">Number of Cash Flows:</label>
        <input type="number" name="num_cash_flows" id="num_cash_flows" min="1" value=" " required>
        <br>

        <div id="cashFlowFields"></div>

        <label for="discount_rate">Discount Rate (in decimal form):</label>
        <input type="text" name="discount_rate" placeholder="e.g., 10% ==> 0.10" required>
        <br>

        <button type="submit">Calculate</button>
    </form>

    {% if error_message %}
        <p style="color: red;">{{ error_message }}</p>
    {% endif %}

    <script>
        document.getElementById("num_cash_flows").addEventListener("input", function() {
            var numCashFlows = this.value;
            var cashFlowFieldsContainer = document.getElementById("cashFlowFields");

            cashFlowFieldsContainer.innerHTML = "";  // Clear previous fields

            for (var i = 1; i <= numCashFlows; i++) {
                var label = document.createElement("label");
                label.setAttribute("for", "cash_flow_" + i);
                label.className = "cash-flow-label";
                label.innerText = "Year " + i + " Cash Flow:";

                var input = document.createElement("input");
                input.setAttribute("type", "text");
                input.setAttribute("name", "cash_flow_" + i);
                input.id = "cash_flow_" + i;
                input.className = "cash-flow-input";

                cashFlowFieldsContainer.appendChild(label);
                cashFlowFieldsContainer.appendChild(input);
                cashFlowFieldsContainer.appendChild(document.createElement("br"));
            }
        });
    </script>
</body>
</html>
